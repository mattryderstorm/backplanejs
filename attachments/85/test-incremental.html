<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ev="http://www.w3.org/2001/xml-events" 
	xmlns:xf="http://www.w3.org/2002/xforms"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	>
	<head>
		<title></title>
		
		<script src="/backplanejs/backplane.js" type="text/javascript">/**/</script>
		<link rel="stylesheet" href="/backplanejs/assets/backplane.css"></link>
		
		<style type="text/css">
			xf\:output,
			xf\:input
			{
				display: block;
				margin-bottom: 10px;
			}
		</style>
	</head>
	<body>    	
		<xf:model id="mdl-default">
			<xf:instance id="inst-default">
				<data xmlns="">
					<a-val></a-val>
					<key-presses>0</key-presses>
				</data>
			</xf:instance>
		</xf:model>
		
		<xf:input ref="instance('inst-default')/a-val" incremental="true">
			<xf:label>Type in me:</xf:label>
			<!-- 
				Disable this setvalue, by commenting out, and relaod. Typing a value into the input, only the first char is reflected in the 
				serialized() instance data. It's like the form just stops working.
			-->
			<xf:action ev:event="xforms-value-changed">
				<xf:setvalue 
					ref="instance('inst-default')/key-presses" 
					value="number(instance('inst-default')/key-presses) + 1"
				></xf:setvalue>
			</xf:action>
		</xf:input>
		
		<xf:output ref="instance('inst-default')/key-presses">
			<xf:label>Key presses: </xf:label>
		</xf:output>
		
		<xf:output value="serialize(instance('inst-default'))">
			<xf:label>inst-default: </xf:label>
		</xf:output>
	</body>
</html>