<!DOCTYPE XHTML>
<html	xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Test Notify</title>
		<script src="http://backplanejs.googlecode.com/files/backplane-0.1.0-min.js" type="text/javascript">/**/</script>
		<link rel="stylesheet" href="http://backplanejs.googlecode.com/files/backplane-0.1.0-min.css" />

		<script type="text/javascript">
		  setTimeout(
  		  function() {

			/*
			 * First register with Yowl. We tell it:
			 *
			 * - the application name;
			 * - all the possible notifications we can send;
			 * - each of the notifications that is enabled by default, either by index or name;
			 * - a default image to use for any message that has no image set.
			 *
			 * Note that the notification 'names' are not displayed on the message, but are
			 * used in the management interface, so should be human readable.
			 */

		    document.Yowl.register(
		        "facebook",
		        [ "Friend logged on", "Friend logged off", "Friend twittered", "Important announcement" ],
		        [ 0, 1, 3, "Friend twittered" ],
		        "img/facebook.gif"
		    );


			/*
			 * Functions to display some messages. For each message we pass:
			 *
			 * - the id of the message, as registered;
			 * - the title for the message;
			 * - some fuller text for the message;
			 * - the name of our application, as registered;
			 * - an optional image;
			 * - a flag to indicate whether sticky or not, which can still be
			 *   overridden by the user's settings;
			 * - a priority level, which could still be overridden by the user's settings.
			 */

			var friend = new Array();

      friend[0] = { foreName: "Sam", fullName: "Sam Sethi", image: "img/sam.jpg" };
			friend[1] = { foreName: "Nico", fullName: "Nico Macdonald", image: "img/nico.jpg" };

			setTimeout(testYowl, 4000);

			function friendLoggedOn(friend, delayToLogoff)
			{
			    document.Yowl.notify(
			        "Friend logged on",
			        friend.fullName + " has logged on",
			        friend.foreName + " has just logged on, and since you don't have many friends, you better go talk to him.",
			        "facebook",
			        friend.image,
			        false,
			        0
			    );

				setTimeout(
					function()
					{
					    document.Yowl.notify(
					        "Friend logged off",
					        friend.fullName + " has logged off",
					        friend.foreName + " has just logged off, so now you really are on your own.",
					        "facebook",
					        friend.image,
					        false,
					        0
					    );
					},
					delayToLogoff
				);
			}//friendLoggedOn()

			function friendTwittered(friend, message)
			{
			    document.Yowl.notify(
			        "Friend twittered",
			        friend.foreName + " updated Twitter.",
			        message,
			        "facebook",
			        "img/twitter.gif",
			        false,
			        0
			    );
			}//friendTwittered()

			function testYowl()
			{

			    document.Yowl.notify(
			        "Important announcement",
			        "This is important",
			        "This message won't go away until you click it. It uses 'emergency' style, and the application icon.",
			        "facebook",
			        null,
			        true,
			        "emergency"
			    );

				friendLoggedOn( friend[0], 10000 );
				setTimeout(
					function()
					{
						friendLoggedOn( friend[1], 13000 );
						return;
					},
					3000
				);

				setTimeout(
					function()
					{
						friendTwittered( friend[0], "Fathers day...having lunch." );
						return;
					},
					8000
				);

				setTimeout(
					function()
					{
						friendTwittered( friend[1], "I'm going to a conference." );
						return;
					},
					10000
				);
				setTimeout(testYowl, 20000);
				return;
			}//testYowl()
			return;
			},
			3000
			);
		</script>

		<!--
			This is test data, so that we can pretend that the user has changed some setting.
			The UI for this will be available shortly.
		-->
		<script type="text/javascript">
				if (0)
				{
				    var app = document.Growl._applicationsList.add(
				        "facebook",
				        {
				            displayName: "default",
				            _notificationsList: new myList()
				        }
				    );
		
					/*
					 * Let's pretend the user has changed the 'Friend twittered' message
					 * to be 'sticky', which means it won't disappear until acknolwedged.
					 */
		
				    app._notificationsList.add(
				    	"Friend twittered",
				    	{
				    		displayName: "default",
				    		isSticky: true
				    	}
				    );
				}//if ( test data is enabled )
		</script>
	</head>
  <body>
	</body>
</html>
